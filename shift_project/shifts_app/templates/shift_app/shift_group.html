{% extends 'shift_app/base.html' %}
{% block main %}

  {% comment %} <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Start</th>
        <th scope="col">End</th>
      </tr>
    </thead>
    <tbody>
      {% for shift in shifts %}
        <tr data-toggle="collapse" data-target="#demo{{ forloop.counter }}" class="accordion-toggle">
          <th scope="row">{{ forloop.counter }}</th>
          <td>{{ shift.start_datetime }}</td>
          <td>{{ shift.end_datetime }}</td>
        </tr>
        <tr >
          <td colspan="6" class="hiddenRow">
            <div class="accordian-body collapse" id="demo{{ forloop.counter }}" style="padding: 50px; background-color:dimgrey"> 
              {% if shift.run_set.count != 0 %} 
                <table class="table table-bordered table-hover table">
                  <thead>
                    <tr>
                      <th scope="col">Runs</th>
                      <th scope="col">Start</th>
                      <th scope="col">End</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for run in shift.run_set.all %}
                      <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>{{ run.start_datetime }}</td>
                        <td>{{ run.end_datetime }}</td>
                      </tr>
                    {% endfor %}
                </table>
              {% else %}
                <p>No runs for this shift</p>
              {% endif %}
            </div>
          </td>
        </tr>
      {% endfor %}
  </table> {% endcomment %}
  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th scope="col">Group Shifts</th>
        <th scope="col">Day</th>
        <th scope="col">Start Time</th>
        <th scope="col">End Time</th>
      </tr>
    </thead>
    <tbody>
      {% for sg in shift_groups %}
        <tr data-toggle="collapse" data-target="#shifts{{ forloop.counter }}" class="accordion-toggle">
          <th scope="row">{{ forloop.counter }}</th>
          <td>{{ sg.start_datetime|date:"l" }}</td>
          <td>{{ sg.start_datetime|time:"H:i" }}</td>
          <td>{{ sg.end_datetime|time:"H:i" }}</td>
        </tr>
        <tr>
          <td colspan="6" class="hiddenRow">
            <div class="accordian-body collapse" id="shifts{{ forloop.counter }}"> 
              {% if sg.shifts.count != 0 %} 
                <table class="table table-bordered table-hover table" style="background-color:rgba(255, 0, 0, .50)">
                  <thead>
                    <tr>
                      <th scope="col">Shifts</th>
                      <th scope="col">Date</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for shift in sg.shifts %}
                      <tr data-toggle="collapse" data-target="#run{{ forloop.counter }}" class="accordion-toggle">
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>{{ shift.start_datetime|date:"d M Y" }}</td>
                      </tr>
                      <tr >
                        <td colspan="6" class="hiddenRow">
                          <div class="accordian-body collapse" id="run{{ forloop.counter }}" style="padding-left: 30px; padding-bottom: 15px; background-color:black"> 
                            {% if shift.run_set.count != 0 %} 
                              <table class="table table-bordered table-hover table">
                                <thead>
                                  <tr>
                                    <th scope="col">Runs</th>
                                    <th scope="col">Start Time</th>
                                    <th scope="col">End Time</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  {% for run in shift.run_set.all %}
                                    <tr>
                                      <th scope="row">{{ forloop.counter }}</th>
                                      <td>{{ run.start_datetime|time:"H:i" }}</td>
                                      <td>{{ run.end_datetime|time:"H:i" }}</td>
                                    </tr>
                                  {% endfor %}
                              </table>
                            {% else %}
                              <p>No runs for this shift</p>
                            {% endif %}
                          </div>
                        </td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              {% else %}
                <p>No runs for this shift</p>
              {% endif %}
            </div>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}